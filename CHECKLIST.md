# ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ

## –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º (–Ω–∞ Replit)

- [x] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [x] –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- [x] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [ ] Node.js 18+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  node --version  # –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 18
  ```

- [ ] PostgreSQL 13+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  psql --version  # –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 13
  ```

- [ ] NPM —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  npm --version  # –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 8
  ```

- [ ] Git —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  git --version
  ```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

- [ ] PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
  ```bash
  sudo systemctl status postgresql
  ```

- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
  ```bash
  sudo -u postgres psql
  CREATE DATABASE ecotajikistan;
  \q
  ```

- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  ```bash
  sudo -u postgres psql
  CREATE USER ecouser WITH PASSWORD '–≤–∞—à-–ø–∞—Ä–æ–ª—å';
  GRANT ALL PRIVILEGES ON DATABASE ecotajikistan TO ecouser;
  \q
  ```

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  ```bash
  psql postgresql://ecouser:–≤–∞—à-–ø–∞—Ä–æ–ª—å@localhost:5432/ecotajikistan -c "SELECT 1"
  ```

### 3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
  ```bash
  git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
  cd ecotajikistan
  ```

- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ
  ```bash
  ls -la
  # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: package.json, README.md, DEPLOYMENT.md, .env.example
  ```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- [ ] NPM –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
  ```bash
  npm install
  # –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-3 –º–∏–Ω—É—Ç—ã)
  ```

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
  ```bash
  npm list --depth=0
  ```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- [ ] –§–∞–π–ª .env —Å–æ–∑–¥–∞–Ω
  ```bash
  cp .env.example .env
  ```

- [ ] DATABASE_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ .env
  ```env
  DATABASE_URL=postgresql://ecouser:–≤–∞—à-–ø–∞—Ä–æ–ª—å@localhost:5432/ecotajikistan
  ```

- [ ] SESSION_SECRET –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  ```bash
  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
  openssl rand -base64 32
  # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ –≤ .env –∫–∞–∫ SESSION_SECRET=...
  ```

- [ ] NODE_ENV —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```env
  NODE_ENV=production
  ```

### 6. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏
  ```bash
  npm run db:migrate
  ```

- [ ] –°–æ–∑–¥–∞–Ω –ø–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã
  ```bash
  npm run db:seed
  ```

- [ ] –ó–∞–ø–∏—Å–∞–Ω—ã —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  ```
  –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:
  - –õ–æ–≥–∏–Ω: admin
  - –ü–∞—Ä–æ–ª—å: admin123
  
  –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–æ–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤:
  - CENTRAL001 - –î–∞—Å—Ç–≥–æ“≥–∏ –º–∞—Ä–∫–∞–∑”£
  - DUSHANBE003 - –°–∞—Ä—Ä–∞—ë—Å–∞—Ç–∏ —à. –î—É—à–∞–Ω–±–µ
  ```

### 7. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ dev —Ä–µ–∂–∏–º–µ
  ```bash
  npm run dev
  ```

- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  ```
  –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5000
  ```

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  ```
  1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000/admin
  2. –õ–æ–≥–∏–Ω: admin
  3. –ü–∞—Ä–æ–ª—å: admin123
  ```

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
  ```
  1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000/
  2. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥: CENTRAL001
  ```

### 8. Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (PM2)

- [ ] PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ
  ```bash
  npm install -g pm2
  ```

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ –¥–ª—è production
  ```bash
  npm run build
  ```

- [ ] PM2 –∑–∞–ø—É—â–µ–Ω
  ```bash
  pm2 start npm --name "ecotajikistan" -- start
  ```

- [ ] PM2 –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
  ```bash
  pm2 save
  pm2 startup
  # –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∫–æ—Ç–æ—Ä—É—é –ø–æ–∫–∞–∂–µ—Ç PM2
  ```

- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2
  ```bash
  pm2 status
  pm2 logs ecotajikistan
  ```

### 9. Nginx –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  sudo apt install nginx
  ```

- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
  ```bash
  sudo nano /etc/nginx/sites-available/ecotajikistan
  # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ DEPLOYMENT.md
  ```

- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
  ```bash
  sudo ln -s /etc/nginx/sites-available/ecotajikistan /etc/nginx/sites-enabled/
  sudo nginx -t
  sudo systemctl reload nginx
  ```

- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Nginx
  ```
  –û—Ç–∫—Ä–æ–π—Ç–µ: http://–≤–∞—à-–¥–æ–º–µ–Ω.tj
  ```

### 10. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] Certbot —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  sudo apt install certbot python3-certbot-nginx
  ```

- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω
  ```bash
  sudo certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.tj -d www.–≤–∞—à-–¥–æ–º–µ–Ω.tj
  ```

- [ ] HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç
  ```
  –û—Ç–∫—Ä–æ–π—Ç–µ: https://–≤–∞—à-–¥–æ–º–µ–Ω.tj
  ```

### 11. Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

- [ ] UFW —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  ```bash
  sudo apt install ufw
  ```

- [ ] –ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
  ```bash
  sudo ufw allow 22/tcp    # SSH
  sudo ufw allow 80/tcp    # HTTP
  sudo ufw allow 443/tcp   # HTTPS
  ```

- [ ] UFW –≤–∫–ª—é—á–µ–Ω
  ```bash
  sudo ufw enable
  sudo ufw status
  ```

### 12. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –±—ç–∫–∞–ø–æ–≤ —Å–æ–∑–¥–∞–Ω–∞
  ```bash
  sudo mkdir -p /home/backup/postgresql
  ```

- [ ] –°–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞ —Å–æ–∑–¥–∞–Ω
  ```bash
  sudo nano /home/backup/backup-db.sh
  # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ DEPLOYMENT.md
  sudo chmod +x /home/backup/backup-db.sh
  ```

- [ ] Cron –∑–∞–¥–∞—á–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
  ```bash
  crontab -e
  # –î–æ–±–∞–≤—å—Ç–µ: 0 2 * * * /home/backup/backup-db.sh
  ```

- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –±—ç–∫–∞–ø –≤—ã–ø–æ–ª–Ω–µ–Ω
  ```bash
  /home/backup/backup-db.sh
  ls -lh /home/backup/postgresql/
  ```

### 13. –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

- [ ] –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ö–æ–¥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (–¥–æ 100MB) —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç

### 14. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] –õ–æ–≥–∏ PM2 –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
  ```bash
  pm2 logs ecotajikistan --lines 50
  ```

- [ ] –õ–æ–≥–∏ PostgreSQL –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
  ```bash
  sudo tail -f /var/log/postgresql/postgresql-*-main.log
  ```

- [ ] –õ–æ–≥–∏ Nginx –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
  ```bash
  sudo tail -f /var/log/nginx/access.log
  sudo tail -f /var/log/nginx/error.log
  ```

### 15. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [ ] –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω
  ```
  –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
  ```

- [ ] SESSION_SECRET —É–Ω–∏–∫–∞–ª–µ–Ω
  ```bash
  # –í .env –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
  grep SESSION_SECRET .env
  ```

- [ ] PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —Å localhost
  ```bash
  sudo nano /etc/postgresql/*/main/pg_hba.conf
  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç —Å—Ç—Ä–æ–∫ —Å 0.0.0.0/0
  ```

- [ ] Firewall –∞–∫—Ç–∏–≤–µ–Ω
  ```bash
  sudo ufw status
  ```

### 16. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã
- [ ] –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É–∫–∞–∑–∞–Ω—ã

## –ì–æ—Ç–æ–≤–æ! üéâ

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs ecotajikistan

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart ecotajikistan

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
pm2 status

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
git pull origin main
npm install
npm run db:migrate
pm2 restart ecotajikistan

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
pg_dump ecotajikistan > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
psql ecotajikistan < backup_20251022.sql
```

### –ö—É–¥–∞ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs ecotajikistan`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `pm2 status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: `psql $DATABASE_URL -c "SELECT 1"`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã: `sudo lsof -i :5000`
5. –°–º–æ—Ç—Ä–∏—Ç–µ DEPLOYMENT.md —Ä–∞–∑–¥–µ–ª "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫"
