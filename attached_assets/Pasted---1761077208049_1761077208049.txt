Тема: Создание полного Руководства по Развертыванию для проекта "ЭкоТочикистон"
Контекст:
Я готовлюсь к переносу нашего веб-приложения "ЭкоТочикистон" из среды Replit в производственную среду (production). План следующий:
Загрузить весь код в репозиторий на GitHub.
Развернуть приложение из GitHub на VDS-сервере (Ubuntu 22.04) на хостинге TimeWeb.
Чтобы этот процесс прошел гладко, профессионально и безопасно, мне необходимо получить от тебя исчерпывающее техническое руководство. Это руководство должно содержать всю информацию, необходимую для настройки сервера и запуска приложения с нуля.
Пожалуйста, предоставь следующую информацию в виде структурированного документа:
1. Обзор Технологического Стека:
Перечисли все ключевые технологии, использованные в проекте (языки программирования, фреймворки для бэкенда и фронтенда, ORM, версия Node.js/Python и т.д.).
2. Переменные Окружения (.env):
Предоставь полный список всех переменных окружения, которые необходимы для работы приложения.
ВАЖНО: Не включай в ответ реальные секретные значения (ключи, пароли). Вместо этого используй плейсхолдеры. Например: DATABASE_URL="user:password@host:port/db", SESSION_SECRET="your_secret_here".
Для каждой переменной дай краткое описание, за что она отвечает.
3. Инструкции по Сборке и Запуску:
Установка зависимостей: Укажи точные команды для установки всех зависимостей для бэкенда и фронтенда (например, npm install, pip install -r requirements.txt).
Сборка проекта (Build): Если фронтенд требует шага сборки (например, npm run build), укажи эту команду.
Запуск в режиме разработки (Development): Команда для локального запуска.
Запуск в производственном режиме (Production): Самая важная команда. Точная команда для запуска сервера в рабочем режиме.
4. Настройка Базы Данных:
Поскольку мы используем внешнюю базу данных (Neon), уточни, нужны ли какие-либо действия для инициализации схемы или применения миграций при первом запуске на новом сервере. Если да, предоставь команду (например, npx drizzle-kit push:pg).
5. Рекомендованная Конфигурация Сервера (Ubuntu 22.04):
Это критически важный раздел для правильной работы на VDS.
Веб-сервер (Reverse Proxy): Предоставь пример готового конфигурационного файла для Nginx. Он должен:
Принимать трафик на порту 80 и 443 (HTTP/HTTPS).
Перенаправлять все запросы на внутренний порт, на котором работает приложение.
Включать базовые настройки для кэширования и безопасности.
Указать, где на сервере должен лежать этот файл.
Менеджер Процессов (Process Manager):
Чтобы приложение не останавливалось после закрытия терминала, предоставь конфигурацию для одного из этих инструментов:
Для Node.js: Пример конфигурационного файла ecosystem.config.js для PM2.
Для Python: Пример .service файла для systemd, который будет запускать приложение через Gunicorn.
6. Автоматическое развертывание через GitHub Actions (CI/CD):
Чтобы автоматизировать обновления сайта, предоставь готовый YAML-файл для GitHub Actions (.github/workflows/deploy.yml). Этот воркфлоу должен:
Активироваться при пуше в main ветку.
Подключаться к VDS-серверу по SSH.
Выполнять все необходимые шаги: git pull, установка зависимостей, сборка проекта (если нужно) и перезапуск приложения через менеджер процессов (например, pm2 restart all).
Это руководство должно быть настолько полным, чтобы системный администратор мог, имея только его, успешно развернуть и запустить приложение на чистом сервере.