# –≠–∫–æ–¢–æ—á–∏–∫–∏—Å—Ç–æ–Ω - –ü–æ–ª–Ω–æ–µ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Production-–í–µ—Ä—Å–∏–∏

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Production-–°–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-production-—Å–∏—Å—Ç–µ–º—ã)
3. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Supabase Storage](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-supabase-storage)
4. [–ü–æ—à–∞–≥–æ–≤–∞—è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](#–ø–æ—à–∞–≥–æ–≤–∞—è-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é)
5. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –°–µ—Ä–≤–µ—Ä–∞](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ-—Å–µ—Ä–≤–µ—Ä–∞)
6. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üéØ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ VDS —Å–µ—Ä–≤–µ—Ä –Ω–∞ Ubuntu 22.04 (TimeWeb)
- ‚úÖ Node.js 18+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Neon Database)
- ‚úÖ Nginx –¥–ª—è reverse proxy
- ‚úÖ PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚úÖ Git –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞

### –í–Ω–µ—à–Ω–∏–µ –°–µ—Ä–≤–∏—Å—ã
- ‚úÖ **Supabase Project** —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º Storage bucket
- ‚úÖ **Neon Database** —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º PostgreSQL
- ‚úÖ **GitHub Repository** —Å –∫–æ–¥–æ–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Production-–°–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Nginx (Reverse Proxy)                 ‚îÇ
‚îÇ              Port 80/443                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Node.js + Express Server                 ‚îÇ
‚îÇ              Port 5000                          ‚îÇ
‚îÇ         (Managed by PM2)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                     ‚îÇ
          ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Neon PostgreSQL ‚îÇ  ‚îÇ  Supabase Storage      ‚îÇ
‚îÇ   (Database)     ‚îÇ  ‚îÇ  (File Storage)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **Frontend**: React + TypeScript + Vite
- **Backend**: Node.js + Express + TypeScript
- **Database**: PostgreSQL (Neon - serverless)
- **File Storage**: Supabase Storage (S3-compatible)
- **Sessions**: PostgreSQL session store (connect-pg-simple)

---

## ‚òÅÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Supabase Storage

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Supabase –ü—Ä–æ–µ–∫—Ç–∞

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com**
2. **–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å**
3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:**
   - –ò–º—è –ø—Ä–æ–µ–∫—Ç–∞: `ecotajikistan` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
   - Database Password: (–∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ!)
   - Region: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –∫ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω—É (Europe/Frankfurt)
   - Plan: Free tier –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Storage Bucket

1. **–í –ø–∞–Ω–µ–ª–∏ Supabase –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Storage:**
   ```
   Dashboard ‚Üí Storage ‚Üí Create a new bucket
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ bucket:**
   - **Name**: `ecotajikistan-files`
   - **Public bucket**: ‚ùå **–ù–ï–¢** (—Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏)
   - **File size limit**: 100 MB
   - **Allowed MIME types**: –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ)

3. **–ù–∞–∂–º–∏—Ç–µ "Create bucket"**

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ Credentials

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Project Settings ‚Üí API:**
   ```
   Settings ‚Üí API
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:**
   - **Project URL**: `https://xxxxx.supabase.co`
   - **anon public key**: (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞!)
   - **service_role key**: ‚ö†Ô∏è **–í–ê–ñ–ù–û! –≠—Ç–æ –≤–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞**

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **service_role** –∫–ª—é—á, –∞ –ù–ï anon key
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ service_role key –≤ Git
- Service role key –æ–±—Ö–æ–¥–∏—Ç Row Level Security (RLS) –ø–æ–ª–∏—Ç–∏–∫–∏

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RLS Policies (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å RLS policies:

```sql
-- –†–∞–∑—Ä–µ—à–∏—Ç—å service role –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
-- (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é service_role —É–∂–µ –æ–±—Ö–æ–¥–∏—Ç RLS, –Ω–æ –¥–ª—è —è–≤–Ω–æ—Å—Ç–∏)

-- –°–æ–∑–¥–∞—Ç—å policy –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
CREATE POLICY "Authenticated users can upload files"
ON storage.objects
FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'ecotajikistan-files');

CREATE POLICY "Users can view their own files"
ON storage.objects
FOR SELECT
TO authenticated
USING (bucket_id = 'ecotajikistan-files');
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –¢–∞–∫ –∫–∞–∫ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–µ Supabase Auth), RLS policies –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã. Service role key –¥–∞—Å—Ç —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø.

---

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –≠–¢–ê–ü 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –õ–æ–∫–∞–ª—å–Ω–æ–≥–æ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Replit)

**–ù–∞ Replit –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
git status

# –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö
git add .
git commit -m "–ì–æ—Ç–æ–≤–æ –∫ production: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Supabase Storage"

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –Ω–∞ GitHub
git push origin main
```

---

### –≠–¢–ê–ü 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VDS –°–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH
ssh your-username@your-server-ip

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è —Ö–æ—Å—Ç–∞
ssh your-username@your-domain.com
```

---

### –≠–¢–ê–ü 3: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¢–µ–∫—É—â–µ–≥–æ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/ecotajikistan
# (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à—É —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 –ø—Ä–æ—Ü–µ—Å—Å
pm2 stop ecotajikistan
# –ò–õ–ò –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ systemd:
# sudo systemctl stop ecotajikistan

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
pm2 status
```

---

### –≠–¢–ê–ü 4: –°–æ–∑–¥–∞–Ω–∏–µ –†–µ–∑–µ—Ä–≤–Ω–æ–π –ö–æ–ø–∏–∏

‚ö†Ô∏è **–ù–ï –ü–†–û–ü–£–°–ö–ê–ô–¢–ï –≠–¢–û–¢ –®–ê–ì!**

```bash
# 1. Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# –ü–æ–ª—É—á–∏—Ç–µ DATABASE_URL –∏–∑ .env
source .env
echo $DATABASE_URL

# –°–æ–∑–¥–∞–π—Ç–µ backup
pg_dump "$DATABASE_URL" -F c -f ~/ecotajikistan_backup_$(date +%Y%m%d_%H%M%S).dump

# 2. Backup —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www
tar -czf ~/ecotajikistan_files_backup_$(date +%Y%m%d_%H%M%S).tar.gz ecotajikistan/

# 3. Backup .env —Ñ–∞–π–ª–∞ (–í–ê–ñ–ù–û!)
cp ecotajikistan/.env ~/ecotajikistan_env_backup_$(date +%Y%m%d_%H%M%S).env

echo "‚úÖ Backup –∑–∞–≤–µ—Ä—à–µ–Ω! –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ ~/ecotajikistan_backup_*"
ls -lh ~/ecotajikistan_*backup*
```

---

### –≠–¢–ê–ü 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ö–æ–¥–∞ —Å GitHub

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/ecotajikistan

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
git stash

# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é —Å GitHub
git pull origin main

# –ï—Å–ª–∏ –±—ã–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∏—Ö
# git stash pop
```

---

### –≠–¢–ê–ü 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ node_modules –¥–ª—è —á–∏—Å—Ç–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
rm -rf node_modules package-lock.json

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤–∫–ª—é—á–∞—è @supabase/storage-js)
npm install

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Supabase Storage —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
npm list @supabase/storage-js

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: @supabase/storage-js@x.x.x
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ added 545 packages
‚úÖ @supabase/storage-js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
‚ùå @google-cloud/storage —É–¥–∞–ª–µ–Ω
```

---

### –≠–¢–ê–ü 7: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Environment Variables

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

**–û–±–Ω–æ–≤–∏—Ç–µ/–¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# ===================================
# DATABASE (Neon PostgreSQL)
# ===================================
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require

# ===================================
# SUPABASE STORAGE (–ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï!)
# ===================================
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_STORAGE_BUCKET=ecotajikistan-files

# ===================================
# APPLICATION
# ===================================
SESSION_SECRET=your-session-secret-here
NODE_ENV=production
PORT=5000
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:**
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + O` ‚Üí Enter (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + X` (–≤—ã–π—Ç–∏)

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
cat .env | grep -E "SUPABASE_URL|SUPABASE_SERVICE_ROLE_KEY|SUPABASE_STORAGE_BUCKET|DATABASE_URL|SESSION_SECRET"
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ 5 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏!**

---

### –≠–¢–ê–ü 8: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase Storage –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è, –Ω–æ —Å—Ö–µ–º–∞ –ë–î –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–µ–∂–Ω–µ–π.

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ schema.ts –Ω–µ –∏–º–µ–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î
# (–í —ç—Ç–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º–∞ –ë–î –Ω–µ –º–µ–Ω—è–ª–∞—Å—å, —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤)

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
# npm run db:push
```

**–í —ç—Ç–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ö–µ–º–∞ –ë–î –ù–ï –∏–∑–º–µ–Ω–∏–ª–∞—Å—å**, –ø–æ—ç—Ç–æ–º—É –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞!

---

### –≠–¢–ê–ü 9: –°–±–æ—Ä–∫–∞ Production-–í–µ—Ä—Å–∏–∏

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
‚úì built in XXXms
‚úì dist/index.js created
‚úì client/ bundle created
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```bash
ls -lh dist/
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: index.js –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã
```

---

### –≠–¢–ê–ü 10: –ó–∞–ø—É—Å–∫ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PM2 (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2
pm2 start ecosystem.config.js

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2 –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
pm2 save
pm2 startup

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ systemd
sudo systemctl start ecotajikistan

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status ecotajikistan
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name           ‚îÇ mode    ‚îÇ ‚Ü∫    ‚îÇ status ‚îÇ cpu  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ ecotajikistan  ‚îÇ fork    ‚îÇ 0    ‚îÇ online ‚îÇ 0%   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –≠–¢–ê–ü 11: –ü—Ä–æ–≤–µ—Ä–∫–∞ –õ–æ–≥–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PM2
pm2 logs ecotajikistan --lines 50

# –ò–õ–ò —á–µ—Ä–µ–∑ systemd:
# sudo journalctl -u ecotajikistan -n 50 -f
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**

‚úÖ **–•–æ—Ä–æ—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
[express] serving on port 5000
Database connected successfully
Server started successfully
```

‚ùå **–ü–ª–æ—Ö–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
Error: SUPABASE_URL environment variable must be set
Error: Failed to connect to database
ECONNREFUSED
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Ä–∞–∑–¥–µ–ª—É [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º).

---

### –≠–¢–ê–ü 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nginx -t

# –ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
sudo systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –°—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –°–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –µ–≥–æ:

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
cd /var/www/ecotajikistan
pm2 stop ecotajikistan
git pull origin main
npm install
nano .env  # –î–æ–±–∞–≤—å—Ç–µ Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. –≠—Ç–∞–ø 7)
npm run build
pm2 restart ecotajikistan
pm2 logs ecotajikistan --lines 20
```

**–í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** ~5-10 –º–∏–Ω—É—Ç
**–í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è:** ~2-3 –º–∏–Ω—É—Ç—ã

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –°–∞–π—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∞–π—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
curl -I http://localhost:5000

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# HTTP/1.1 200 OK
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

1. ‚úÖ **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç**
2. ‚úÖ **–°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**
3. ‚úÖ **–°—Ç–∞—Ä—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å**
4. ‚úÖ **–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
5. ‚úÖ **–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤** (–¥–æ 5 —à—Ç—É–∫, 100 MB –∫–∞–∂–¥—ã–π)
6. ‚úÖ **–§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º**
7. ‚úÖ **–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏**
8. ‚úÖ **–§–∞–π–ª—ã –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å** (–∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase Storage

1. **–ó–∞–π–¥–∏—Ç–µ –≤ Supabase Dashboard:**
   ```
   https://app.supabase.com/project/your-project/storage/buckets
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ bucket `ecotajikistan-files`**

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É `uploads/`**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å UUID –∏–º–µ–Ω–∞–º–∏
   - –ü—Ä–∏–º–µ—Ä: `uploads/a1b2c3d4-e5f6-7890-abcd-ef1234567890`

### 4. –¢–µ—Å—Ç –ó–∞–≥—Ä—É–∑–∫–∏ –§–∞–π–ª–∞

1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∫–∞–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç**
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ 3 —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: PDF, JPG, DOCX)
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞**
5. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
6. **–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
7. **–°–∫–∞—á–∞–π—Ç–µ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã**

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—à–∏–±–∫–∞ "SUPABASE_URL not set"

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat .env | grep SUPABASE

# –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—É—Å—Ç—ã–µ, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö:
nano .env

# –î–æ–±–∞–≤—å—Ç–µ:
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-key-here
SUPABASE_STORAGE_BUCKET=ecotajikistan-files

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart ecotajikistan
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PM2
pm2 logs ecotajikistan --lines 100 | grep -i "upload\|supabase\|error"
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Service Role Key**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `service_role` key, –∞ –ù–ï `anon` key

2. **Bucket –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase Dashboard, —á—Ç–æ bucket `ecotajikistan-files` —Å–æ–∑–¥–∞–Ω

3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤**
   - Service role key –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ Storage

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ Supabase Dashboard
# Settings ‚Üí API ‚Üí service_role key

# –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º
nano .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart ecotajikistan
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –§–∞–π–ª—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä DevTools (F12)
# Network ‚Üí –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ Supabase**
   - URL —Ñ–∞–π–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –ë–î

2. **–û—à–∏–±–∫–∞ signed URL**
   - Supabase –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å signed URL

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs ecotajikistan | grep "download"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã –µ—Å—Ç—å –≤ Supabase Storage
# Dashboard ‚Üí Storage ‚Üí ecotajikistan-files ‚Üí uploads/
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "Cannot find module @supabase/storage-js"

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
npm list @supabase/storage-js

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart ecotajikistan
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã (–∏–∑ Google Cloud) –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è

**–≠—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ!**

–°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ Google Cloud Storage (Replit), **–ù–ï –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã** –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Supabase.

**–†–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã):**

1. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π**
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏—Ö –≤ Supabase Storage –≤—Ä—É—á–Ω—É—é**
3. **–û–±–Ω–æ–≤–∏—Ç–µ URL –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç –∏–ª–∏ –æ–Ω–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥.

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Production

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–∞—Ç—É—Å–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å PM2
pm2 status

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs ecotajikistan --lines 100
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Supabase Usage

1. **–ó–∞–π–¥–∏—Ç–µ –≤ Supabase Dashboard**
2. **Reports ‚Üí Storage**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ reboot
pm2 startup
pm2 save
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Production

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –•—Ä–∞–Ω–∏—Ç—å credentials –≤ `.env` —Ñ–∞–π–ª–µ
- –î–æ–±–∞–≤–∏—Ç—å `.env` –≤ `.gitignore`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `service_role` key –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞

‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –ö–æ–º–º–∏—Ç–∏—Ç—å `.env` –≤ Git
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `anon` key –≤–º–µ—Å—Ç–æ `service_role`
- –•—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ

### HTTPS

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d your-domain.com
```

### Firewall

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
sudo ufw allow 22    # SSH
sudo ufw allow 80    # HTTP
sudo ufw allow 443   # HTTPS
sudo ufw enable
```

---

## üìù –§–∏–Ω–∞–ª—å–Ω—ã–π –ß–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è deployment'–∞:

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- [ ] –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- [ ] –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–¥–æ 5 —à—Ç—É–∫)
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- [ ] –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Supabase Storage
- [ ] –§–∞–π–ª—ã –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] PM2 –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- [ ] Backup —Å–æ–∑–¥–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] .env —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!** –í—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ production-–≤–µ—Ä—Å–∏—é –≠–∫–æ–¢–æ—á–∏–∫–∏—Å—Ç–æ–Ω —Å Supabase Storage.

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ —Å Replit Object Storage –Ω–∞ Supabase Storage
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ production-ready —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ service_role key
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏–ª–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –Ω–∞–¥–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

**–°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏:**
1. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Supabase Storage quota
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup'—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É monitoring (–Ω–∞–ø—Ä–∏–º–µ—Ä, Uptime Robot)

**–£–¥–∞—á–∏ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º!** üöÄ

---

## üìû –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `pm2 logs ecotajikistan`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env**: –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã?
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase Dashboard**: Bucket —Å–æ–∑–¥–∞–Ω?
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤ DevTools**: –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç API?

**–û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
pm2 status
sudo systemctl status nginx
sudo systemctl status postgresql  # –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs --lines 200
tail -f /var/log/nginx/error.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
psql "$DATABASE_URL" -c "SELECT version();"

# –¢–µ—Å—Ç Supabase connection (–¥–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –∫–æ–¥)
curl -X GET "${SUPABASE_URL}/storage/v1/bucket" \
  -H "apikey: ${SUPABASE_SERVICE_ROLE_KEY}" \
  -H "Authorization: Bearer ${SUPABASE_SERVICE_ROLE_KEY}"
```

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: $(date +%Y-%m-%d)  
**–ê–≤—Ç–æ—Ä**: –≠–∫–æ–¢–æ—á–∏–∫–∏—Å—Ç–æ–Ω Development Team
