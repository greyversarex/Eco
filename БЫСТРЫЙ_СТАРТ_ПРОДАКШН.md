# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ server/index.ts

### 1. Helmet - –∑–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö ‚úÖ
```typescript
helmet({
  contentSecurityPolicy: false,        // –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –º–æ–±–∏–ª—å–Ω—ã–µ –∞—Å—Å–µ—Ç—ã
  crossOriginEmbedderPolicy: false,   // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
})
```

### 2. CORS - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚úÖ
```typescript
// –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç:
// - –ó–∞–ø—Ä–æ—Å—ã –ë–ï–ó origin (–º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
// - Origins –∏–∑ ALLOWED_ORIGINS
// - –í—Å–µ –≤ dev —Ä–µ–∂–∏–º–µ

// –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
console.log('Blocked by CORS:', origin);
```

### 3. Cookies - —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ HTTP ‚úÖ
```typescript
cookie: {
  secure: false,        // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP (–±–µ–∑ HTTPS)
  sameSite: 'lax',     // ‚úÖ –ö—É–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö
}
```

## üìã –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
SESSION_SECRET=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
DATABASE_URL=postgresql://user:password@localhost:5432/ecodoc

# –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
ALLOWED_ORIGINS=http://192.168.1.100:5000

# –î–ª—è HTTP
SECURE_COOKIES=false
NODE_ENV=production
PORT=5000
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 2. –°–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
npm run build

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
npm start
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞
```bash
curl http://–≤–∞—à-ip:5000/api/auth/me
# –û—Ç–≤–µ—Ç: {"error":"Not authenticated"} - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
```

### –¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ - –∫—É–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å!

## üîç –û—Ç–ª–∞–¥–∫–∞

**–ï—Å–ª–∏ CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç:**
–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - —Ç–∞–º –ø–æ—è–≤–∏—Ç—Å—è:
```
Blocked by CORS: http://–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π-–¥–æ–º–µ–Ω.com
```
–î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–π origin –≤ `ALLOWED_ORIGINS`.

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫—É–∫–∏:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
- `SECURE_COOKIES=false` (–¥–ª—è HTTP)
- `sameSite: 'lax'` –≤ –∫–æ–¥–µ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –º–µ–Ω—è–π—Ç–µ** `sameSite` –∏ `secure` –≤ –∫–æ–¥–µ - –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —Ä–∞–±–æ—Ç–∞—é—Ç –ë–ï–ó origin - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
3. **HTTP —Ä–∞–±–æ—Ç–∞–µ—Ç** - secure: false –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ
4. **HTTPS –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** - –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `SECURE_COOKIES=true`

---

‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!** –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –ø–æ–ª–æ–º–∞—Ç—å —Ä–∞–±–æ—Ç—É.
